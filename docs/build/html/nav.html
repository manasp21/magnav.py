<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Navigation Algorithms &#8212; MagNavPy 0.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=01f34227"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API: Functions" href="api_functions.html" />
    <link rel="prev" title="Neural Network-Based Model Diagrams" href="nncomp.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="navigation-algorithms">
<h1>Navigation Algorithms<a class="headerlink" href="#navigation-algorithms" title="Link to this heading">¶</a></h1>
<p>The following are key functions related to navigation algorithms.</p>
<section id="magnav-filter-model">
<h2>MagNav Filter Model<a class="headerlink" href="#magnav-filter-model" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="magnavpy.model_functions.create_model">
<span class="sig-prename descclassname"><span class="pre">magnavpy.model_functions.</span></span><span class="sig-name descname"><span class="pre">create_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lat1_rad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.7853981633974483</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_pos_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_alt_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_vel_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_att_sigma_rad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.00017453292519943296</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meas_var</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">VRW_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.000238</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ARW_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5.81e-07</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baro_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ha_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a_hat_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acc_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.000245</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gyro_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">7.27e-09</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fogm_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vec_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">TL_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baro_tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acc_tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gyro_tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fogm_tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">600.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vec_states</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fogm_state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">P0_TL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/magnavpy/model_functions.html#create_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#magnavpy.model_functions.create_model" title="Link to this definition">¶</a></dt>
<dd><p>Create a magnetic navigation filter model for use in an EKF or a MPF.</p>
</dd></dl>

<section id="magnav-filter-model-internals">
<h3>MagNav filter model internals<a class="headerlink" href="#magnav-filter-model-internals" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="magnavpy.model_functions.create_p0">
<span class="sig-prename descclassname"><span class="pre">magnavpy.model_functions.</span></span><span class="sig-name descname"><span class="pre">create_p0</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lat1_rad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.7853981633974483</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_pos_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_alt_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_vel_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_att_sigma_rad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.00017453292519943296</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ha_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a_hat_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acc_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.000245</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gyro_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">7.27e-09</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fogm_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vec_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vec_states</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fogm_state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">P0_TL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#magnavpy.model_functions.create_p0" title="Link to this definition">¶</a></dt>
<dd><p>Create initial covariance matrix P0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lat1_rad</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – initial approximate latitude [rad]</p></li>
<li><p><strong>init_pos_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – initial position uncertainty [m]</p></li>
<li><p><strong>init_alt_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – initial altitude uncertainty [m]</p></li>
<li><p><strong>init_vel_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – initial velocity uncertainty [m/s]</p></li>
<li><p><strong>init_att_sigma_rad</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – initial attitude uncertainty [rad]</p></li>
<li><p><strong>ha_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – barometer aiding altitude bias [m]</p></li>
<li><p><strong>a_hat_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – barometer aiding vertical accel bias [m/s^2]</p></li>
<li><p><strong>acc_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – accelerometer bias [m/s^2]</p></li>
<li><p><strong>gyro_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – gyroscope bias [rad/s]</p></li>
<li><p><strong>fogm_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – FOGM catch-all bias [nT]</p></li>
<li><p><strong>vec_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – vector magnetometer noise std dev</p></li>
<li><p><strong>vec_states</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – if true, include vector magnetometer states</p></li>
<li><p><strong>fogm_state</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – if true, include FOGM catch-all bias state</p></li>
<li><p><strong>P0_TL</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.2)"><em>numpy.ndarray</em></a><em>]</em>) – initial Tolles-Lawson covariance matrix (NumPy array)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>initial covariance matrix (NumPy array)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.2)">numpy.ndarray</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="magnavpy.model_functions.create_qd">
<span class="sig-prename descclassname"><span class="pre">magnavpy.model_functions.</span></span><span class="sig-name descname"><span class="pre">create_qd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">VRW_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.000238</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ARW_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5.81e-07</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baro_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acc_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.000245</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gyro_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">7.27e-09</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fogm_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vec_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">TL_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baro_tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acc_tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gyro_tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fogm_tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">600.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vec_states</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fogm_state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#magnavpy.model_functions.create_qd" title="Link to this definition">¶</a></dt>
<dd><p>Create the discrete time process/system noise matrix Qd.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dt</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – time step [s]</p></li>
<li><p><strong>VRW_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – velocity random walk standard deviation</p></li>
<li><p><strong>ARW_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – angle random walk standard deviation</p></li>
<li><p><strong>baro_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – barometer noise standard deviation</p></li>
<li><p><strong>acc_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – accelerometer noise standard deviation</p></li>
<li><p><strong>gyro_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – gyroscope noise standard deviation</p></li>
<li><p><strong>fogm_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – FOGM catch-all bias standard deviation</p></li>
<li><p><strong>vec_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – vector magnetometer noise standard deviation</p></li>
<li><p><strong>TL_sigma</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.2)"><em>numpy.ndarray</em></a><em>]</em>) – Tolles-Lawson covariance matrix (NumPy array)</p></li>
<li><p><strong>baro_tau</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – barometer correlation time [s]</p></li>
<li><p><strong>acc_tau</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – accelerometer correlation time [s]</p></li>
<li><p><strong>gyro_tau</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – gyroscope correlation time [s]</p></li>
<li><p><strong>fogm_tau</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – FOGM catch-all correlation time [s]</p></li>
<li><p><strong>vec_states</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – if true, include vector magnetometer states</p></li>
<li><p><strong>fogm_state</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – if true, include FOGM catch-all bias state</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>discrete time process/system noise matrix Qd (NumPy array)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.2)">numpy.ndarray</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="magnavpy.model_functions.get_pinson">
<span class="sig-prename descclassname"><span class="pre">magnavpy.model_functions.</span></span><span class="sig-name descname"><span class="pre">get_pinson</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">lat_rad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ve</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cnb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baro_tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acc_tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gyro_tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fogm_tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">600.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vec_states</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fogm_state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.03</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0003</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k3</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-06</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/magnavpy/model_functions.html#get_pinson"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#magnavpy.model_functions.get_pinson" title="Link to this definition">¶</a></dt>
<dd><p>Get the nx x nx Pinson dynamics matrix F.
States (errors) are 0-indexed:
0: lat, 1: lon, 2: alt
3: vn, 4: ve, 5: vd
6: tn, 7: te, 8: td (tilts)
9: ha (baro alt bias)
10: a_hat (baro accel bias)
11: ax_bias, 12: ay_bias, 13: az_bias (accel biases)
14: gx_bias, 15: gy_bias, 16: gz_bias (gyro biases)
(Optional) Tolles-Lawson coeffs
(Optional) Vector mag biases
(Optional) FOGM catch-all S</p>
</dd></dl>

</section>
</section>
<section id="cramerrao-lower-bound">
<h2>Cramér–Rao Lower Bound<a class="headerlink" href="#cramerrao-lower-bound" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="magnavpy.ekf.crlb">
<span class="sig-prename descclassname"><span class="pre">magnavpy.ekf.</span></span><span class="sig-name descname"><span class="pre">crlb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/magnavpy/ekf.html#crlb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#magnavpy.ekf.crlb" title="Link to this definition">¶</a></dt>
<dd><p>Placeholder for Cramer-Rao Lower Bound calculation.</p>
</dd></dl>

</section>
<section id="extended-kalman-filter">
<h2>Extended Kalman Filter<a class="headerlink" href="#extended-kalman-filter" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="magnavpy.ekf.ekf">
<span class="sig-prename descclassname"><span class="pre">magnavpy.ekf.</span></span><span class="sig-name descname"><span class="pre">ekf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ve</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cnb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meas</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">itp_mapS</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">P0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Qd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baro_tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acc_tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gyro_tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fogm_tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">600.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">core</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">der_mapS</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">map_alt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/magnavpy/ekf.html#ekf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#magnavpy.ekf.ekf" title="Link to this definition">¶</a></dt>
<dd><p>Extended Kalman filter (EKF) for airborne magnetic anomaly navigation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lat</strong> (<em>np.ndarray</em>) – Latitude [rad], shape (N,)</p></li>
<li><p><strong>lon</strong> (<em>np.ndarray</em>) – Longitude [rad], shape (N,)</p></li>
<li><p><strong>alt</strong> (<em>np.ndarray</em>) – Altitude [m], shape (N,)</p></li>
<li><p><strong>vn</strong> (<em>np.ndarray</em>) – North velocity [m/s], shape (N,)</p></li>
<li><p><strong>ve</strong> (<em>np.ndarray</em>) – East velocity [m/s], shape (N,)</p></li>
<li><p><strong>vd</strong> (<em>np.ndarray</em>) – Down velocity [m/s], shape (N,)</p></li>
<li><p><strong>fn</strong> (<em>np.ndarray</em>) – North specific force [m/s^2], shape (N,)</p></li>
<li><p><strong>fe</strong> (<em>np.ndarray</em>) – East specific force [m/s^2], shape (N,)</p></li>
<li><p><strong>fd</strong> (<em>np.ndarray</em>) – Down specific force [m/s^2], shape (N,)</p></li>
<li><p><strong>Cnb</strong> (<em>np.ndarray</em>) – Direction cosine matrix (body to navigation), shape (3,3,N) or (3,3)</p></li>
<li><p><strong>meas</strong> (<em>np.ndarray</em>) – Scalar magnetometer measurement [nT], shape (N,) or (N,1)</p></li>
<li><p><strong>dt</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – Measurement time step [s]</p></li>
<li><p><strong>itp_mapS</strong> (<em>callable</em><em> or </em><em>Map_Cache</em>) – Scalar map interpolation function (callable)
or a Map_Cache object.</p></li>
<li><p><strong>P0</strong> (<em>np.ndarray</em><em>, </em><em>optional</em>) – Initial covariance matrix, shape (nx,nx).
Defaults to create_P0().</p></li>
<li><p><strong>Qd</strong> (<em>np.ndarray</em><em>, </em><em>optional</em>) – Discrete time process/system noise matrix, shape (nx,nx).
Defaults to create_Qd().</p></li>
<li><p><strong>R</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a><em>, </em><em>optional</em>) – Measurement noise variance or (R_min, R_max) for adaptation.
Defaults to 1.0.</p></li>
<li><p><strong>baro_tau</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em>, </em><em>optional</em>) – Barometer time constant [s]. Defaults to 3600.0.</p></li>
<li><p><strong>acc_tau</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em>, </em><em>optional</em>) – Accelerometer time constant [s]. Defaults to 3600.0.</p></li>
<li><p><strong>gyro_tau</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em>, </em><em>optional</em>) – Gyroscope time constant [s]. Defaults to 3600.0.</p></li>
<li><p><strong>fogm_tau</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em>, </em><em>optional</em>) – FOGM catch-all time constant [s]. Defaults to 600.0.</p></li>
<li><p><strong>date</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em>, </em><em>optional</em>) – Measurement date (decimal year) for IGRF [yr].
Defaults to get_years(2020,185).</p></li>
<li><p><strong>core</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><em>optional</em>) – If true, include core magnetic field in measurement. Defaults to False.</p></li>
<li><p><strong>der_mapS</strong> (<em>callable</em><em>, </em><em>optional</em>) – Scalar map vertical derivative map interpolation function.
Defaults to None.</p></li>
<li><p><strong>map_alt</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em>, </em><em>optional</em>) – Map altitude [m]. Defaults to 0.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Filter results struct.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="api_reference.html#magnavpy.magnav.FILTres" title="magnavpy.magnav.FILTres">FILTres</a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="run-filter-with-additional-options">
<h2>Run Filter (with additional options)<a class="headerlink" href="#run-filter-with-additional-options" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="magnavpy.magnav.run_filt">
<span class="sig-prename descclassname"><span class="pre">magnavpy.magnav.</span></span><span class="sig-name descname"><span class="pre">run_filt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ins</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="api_reference.html#magnavpy.magnav.INS" title="magnavpy.magnav.INS"><span class="pre">INS</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">xyz</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="api_reference.html#magnavpy.magnav.XYZ0" title="magnavpy.magnav.XYZ0"><span class="pre">XYZ0</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="api_reference.html#magnavpy.magnav.XYZ1" title="magnavpy.magnav.XYZ1"><span class="pre">XYZ1</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="api_reference.html#magnavpy.magnav.XYZ20" title="magnavpy.magnav.XYZ20"><span class="pre">XYZ20</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="api_reference.html#magnavpy.magnav.XYZ21" title="magnavpy.magnav.XYZ21"><span class="pre">XYZ21</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">mag_map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">MapS</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">MapS(info='null',</span> <span class="pre">lat=array([],</span> <span class="pre">dtype=float64),</span> <span class="pre">lon=array([],</span> <span class="pre">dtype=float64),</span> <span class="pre">alt=array([],</span> <span class="pre">dtype=float64),</span> <span class="pre">map=array([],</span> <span class="pre">dtype=float64),</span> <span class="pre">xx=array([],</span> <span class="pre">dtype=float64),</span> <span class="pre">yy=array([],</span> <span class="pre">dtype=float64))</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temp_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="api_reference.html#magnavpy.magnav.TempParams" title="magnavpy.magnav.TempParams"><span class="pre">TempParams</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="api_reference.html#magnavpy.magnav.FILTres" title="magnavpy.magnav.FILTres"><span class="pre">FILTres</span></a></span></span><a class="reference internal" href="_modules/magnavpy/magnav.html#run_filt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#magnavpy.magnav.run_filt" title="Link to this definition">¶</a></dt>
<dd><p>Runs the specified filter (Extended Kalman Filter or Neural EKF for now)
and returns its results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ins</strong> – INS data.</p></li>
<li><p><strong>xyz</strong> – Flight data (XYZ0, XYZ1, XYZ20, or XYZ21).</p></li>
<li><p><strong>filter_params</strong> – Filter parameters (e.g., EKF_RT).</p></li>
<li><p><strong>mag_map</strong> – A <cite>MapS</cite> object representing the magnetic anomaly map. Defaults to <cite>MAP_S_NULL</cite>.</p></li>
<li><p><strong>temp_params</strong> – (Optional) Temperature compensation parameters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A <cite>FILTres</cite> object containing the filter results.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">MagNavPy</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="data.html">Flight Path &amp; INS Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="maps.html">Magnetic Anomaly Maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="comp.html">Aeromagnetic Compensation</a></li>
<li class="toctree-l1"><a class="reference internal" href="nncomp.html">Neural Network-Based Model Diagrams</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Navigation Algorithms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#magnav-filter-model">MagNav Filter Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cramerrao-lower-bound">Cramér–Rao Lower Bound</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extended-kalman-filter">Extended Kalman Filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-filter-with-additional-options">Run Filter (with additional options)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_functions.html">API: Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_structs.html">API: Structs</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_reference.html">API Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="nncomp.html" title="previous chapter">Neural Network-Based Model Diagrams</a></li>
      <li>Next: <a href="api_functions.html" title="next chapter">API: Functions</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, MagNav.jl Authors & AI Porting Team.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/nav.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>